<!DOCTYPE html>
<html ng-app="app">
<head lang="en">
    <meta charset="UTF-8">
    <title>延迟对象</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/theme.css">
</head>
<body>
<div class="container" ng-controller="deferCtrl">
    <div class="panel panel-primary">
        <div class="panel-heading">延迟对象</div>
        <div class="panel-body" ng-bind="result"></div>
    </div>
</div>
<script type="text/javascript" src="js/angular.js"></script>
<script>
    var app=angular.module("app",[]);
    app.controller("deferCtrl",['$scope','$q',function ($scope,$q) {
        var dfd=$q.defer();
        function count() {
            setTimeout(function () {
                dfd.resolve();
            },2000)
            return dfd.promise;
        }
        var res=count();
        res.then(function () {
            $scope.result="执行成功"
        },function () {
            $scope.result="执行失败"
        })
    }])

</script>
</body>
</html>