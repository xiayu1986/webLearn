!function(t,e,r,a){function i(e,r){var a=arguments.length,i=arguments[1];return 1===a&&(i="object"===t.type(arguments[0])?arguments[0]:{}),this.each(function(){var r=t(this),a=r.data("WEB.dataTable"),o=t.extend({},s.DEFAULTS,r.data(),i);a||r.data("WEB.dataTable",a=new s(this,o)),"string"===t.type(e)&&"_"!=e.charAt(0)?a[e]?a[e](o):t.error("不支持的方法！"):a.init(o)})}t.extend({isBrowerSupportWebPlugin:function(){var e=!1,r="Microsoft Internet Explorer"==navigator.appName&&navigator.appVersion.split(";")[1].replace(/[ ]/g,""),a=["MSIE8.0","MSIE7.0","MSIE6.0","MSIE5.0"];return t.each(a,function(t,a){return r==a?(alert("您的浏览器版本过低，本插件无法提供支持，请升级！"),e=!1,!1):void(e=!0)}),e}});var s=function(e,r){this.$element=t(e),this.options=r};s.VERSION="1.0.0",s.DEFAULTS={isFilter:!0,data:[],sortColumns:[],beforeSort:t.noop(),afterSort:t.noop,ignoreKey:[],filterContainer:t("body"),emptyFilter:function(){}},s.prototype={init:function(e){return"array"!=t.type(e.data)?void alert("数据源必须为数组！"):0==e.data.length?void alert("数据源不能为空！"):(this.create(e),void this._filter(e))},destroy:function(){this.$element.find("thead:first >tr > th").removeClass("WEB_sortByDesc WEB_sortByAsc WEB_activeSort WEB_sort"),this.$element.removeData("WEB.dataTable")},create:function(e){if(1==e.data.length)return void e.afterSort.call(this,{relatedTarget:e,sortedData:e.data});var r=this.$element.find("thead:first >tr > th"),a=this;r.length>0&&r.each(function(r,i){var s=e.sortColumns[r];if(s){var o=s.sort,n=s.isPrimaryKey;if(o&&t(this).addClass("WEB_sort"),n){a.clear(),t(this).addClass("WEB_sortBy"+s.type).addClass("WEB_activeSort");var l=t(this).hasClass("WEB_sortByDesc");a.sort(e,l)}}}),this.event(e)},event:function(e){var r=this;this.$element.off("click").on("click",".WEB_sort",function(){e.beforeSort.call(r,{relatedTarget:e}),r.switch(t(this),e)})},clear:function(){t(".WEB_sort").removeClass("WEB_sortByDesc WEB_sortByAsc WEB_activeSort")},sort:function(e,r){var a=t(".WEB_activeSort").index()||0,i=this,s=e.sortColumns[a],o=e.source?e.source:e.data;if(s){var n=s.key,l=o.sort(function(e,a){var i,s,o;if("object"===t.type(n)?"array"===n.type&&(i=e[n.objKey][n.index][n.orderKey],s=a[n.objKey][n.index][n.orderKey]):(i=e[n],s=a[n]),i=t.trim(i),s=t.trim(s),o=t.type(i),!t.isNumeric(i)&&"string"===o){var l=/\d{4}([-\/])\d{1,2}([-\/])\d{1,2}(\s{1}\d{1,2}:\d{1,2}(:\d{1,2})?)?/g;if(!l.test(i))return r?s.localeCompare(i):i.localeCompare(s);i=Date.parse(i.replace(/-/g,"/")),s=Date.parse(s.replace(/-/g,"/"))}return r?s-i:i-s});e.afterSort.call(i,{relatedTarget:e,sortedData:l})}},switch:function(t,e){var r=t.hasClass("WEB_sortByDesc");this.clear(),t.addClass("WEB_activeSort"),r?t.removeClass("WEB_sortByDesc").addClass("WEB_sortByAsc"):t.removeClass("WEB_sortByAsc").addClass("WEB_sortByDesc"),r=!r,this.sort(e,r)},_filter:function(e){function r(e,r,a){t.each(e,function(e,a){if(a){var i=JSON.stringify(a),o=new RegExp(r,"gi");o.test(i)&&i&&t.inArray(i,s)===-1&&s.push(i)}})}function a(e){var r=[];return t.each(e,function(e,a){r.push(t.parseJSON(a))}),r}if(e.isFilter){var i=t("#WEB_dataTable_filter"),s=[],o=this,n=e.data;0===i.length&&(e.filterContainer.append('<input type="txt" class="WEB_dataTable_filter" id="WEB_dataTable_filter" />'),i=t("#WEB_dataTable_filter")),i.off("input").on("input",function(){var i=t(this).val();s=[],e.source=null,r(n,i,0);var l=a(s);if(t.isEmptyObject(l))return void e.emptyFilter.call(o);var c=t(".WEB_activeSort").hasClass("WEB_sortByDesc");e.source=l,o.sort(e,c)})}}};var o=t.fn.WEB_dataTable;t.isBrowerSupportWebPlugin()&&(t.fn.WEB_dataTable=i,t.fn.WEB_dataTable.Constructor=s,t.fn.WEB_dataTable.noConflict=function(){return t.fn.WEB_dataTable=o,this})}(jQuery,window,document);