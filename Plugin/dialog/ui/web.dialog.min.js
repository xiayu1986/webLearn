!function(t,i,s,e){t.extend({isBrowerSupportWebPlugin:function(){var i=!1,s="Microsoft Internet Explorer"==navigator.appName&&navigator.appVersion.split(";")[1].replace(/[ ]/g,""),e=["MSIE8.0","MSIE7.0","MSIE6.0","MSIE5.0"];return t.each(e,function(t,e){return s==e?(alert("您的浏览器版本过低，本插件无法提供支持，请升级！"),i=!1,!1):void(i=!0)}),i}});var o={modal:{showModal:!0,modalOpacity:.5,modalColor:"#000",modalClass:9,modalClose:!0},ESClose:!0,lockScrollBar:!1,title:{showTitle:!0,titleInner:"标题"},close:{showClose:!0,closeInner:"&times;",auto:!1,delay:2e3},buttons:{showButton:!0,panel:[]},draggable:!1,scrollRate:20,dialogScroll:!0,beforeOpen:function(){},afterOpen:function(){},afterClose:function(){},beforeClose:function(){},dragIng:function(){},dragStart:function(){},dragEnd:function(){}},n={init:function(i,s){return this.each(function(){var e=t(this).data("WEB_dialog_settings");this.Event=s||{},e?this.settings=t.extend(!0,{},e,i):(this.settings=t.extend(!0,{},o,i),t(this).data("WEB_dialog_settings",this.settings)),n._createDialog.call(this)})},position:function(){return this.each(function(){n._dialogCenter.call(this)})},_dialogCenter:function(){var s=parseInt(t(this).find(".WEB_dialog_title").css("minWidth")),e=this,o=t(i).width(),a=t(i).height(),l=parseInt(t(this).css("borderLeftWidth"))||0,r=parseInt(t(this).css("paddingLeft"))||0,c=s;if(t(this).css({margin:0,width:s,height:"auto",left:"50%",top:"50%",position:"fixed"}),this.settings.width&&t.isNumeric(Number(this.settings.width)))c=this.settings.width;else if("string"==typeof this.settings.width){var h=/^(1[0-9]?|[2-9]\d?)%$/gi;if(h.test(this.settings.width)){var g=this.settings.width.replace(h,"$1");g/=100,c=o*g,t.isNumeric(c)||(c=s)}}c>=o?c=o-2*l-2*r:c<s&&(c=s),t(this).css({width:c}),this.settings.height&&t(this).css({height:this.settings.height});var d=t(this).outerWidth(),f=t(this).outerHeight();d>=o?t(this).css({marginLeft:0,left:0}):t(this).css({marginLeft:-d/2});var u="Microsoft Internet Explorer"==navigator.appName&&navigator.appVersion.split(";")[1].replace(/[ ]/g,"");if("MSIE8.0"==u){var p=t(this).find(".WEB_dialog_title"),_=t(this).find(".WEB_dialog_footer"),v=parseInt(t(this).css("borderTopWidth")),m=parseInt(t(this).css("borderBottomWidth")),b=t(this).find(".WEB_dialog_body");f=(b.outerHeight()||0)+(p.outerHeight()||0)+(_.outerHeight()||0)+v+m}if(f>a)if(t(this).css({marginTop:0,height:"auto",top:0,overflow:"hidden"}),e.settings.dialogScroll)n._createScrollBar.call(this),n._resizeDialog.call(this);else{t(this).off("mousewheel"),t(i).off(".resetDialog");var E=t(i).scrollTop();t(this).css({top:E,position:"absolute"}),t("html").css({"overflow-y":"auto"})}else t(this).off("mousewheel"),t(this).css({marginTop:-f/2,top:"50%",position:"fixed"});t("html").css({"overflow-x":"hidden"}),this.settings.draggable&&n._dragDialog.call(this)},_createDialog:function(){var i=this;this.settings.beforeOpen&&t.isFunction(this.settings.beforeOpen)&&this.settings.beforeOpen(this.Event),this.e=t.Event("webDialog.beforeOpen"),t(this).trigger(this.e),t(this).addClass("WEB_dialog").css({display:"block",width:"auto",padding:0}),n._createDialogBody.call(this),n._createButton.call(this),n._createModal.call(this),this.settings.lockScrollBar&&n._lockScrollBar.call(this),n._dialogCenter.call(this),this.settings.close.auto&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){n._closeDialog.call(i)},this.settings.close.delay)),this.settings.afterOpen&&t.isFunction(this.settings.afterOpen)&&this.settings.afterOpen(this.Event),this.e=t.Event("webDialog.afterOpen"),t(this).trigger(this.e),t(s).off("keydown").on("keydown",function(t){if(27==t.keyCode){if(!i.settings.ESClose)return;i.settings.close.auto&&i.timer&&clearTimeout(i.timer),n._closeDialog.call(i)}}),this.settings.draggable?t(this).find(".WEB_dialog_title").css({cursor:"move"}):t(this).find(".WEB_dialog_title").css({cursor:"auto"})},_createButton:function(){var i=this;if(t(this).find(".WEB_dialog_title,.WEB_dialog_close,.WEB_dialog_footer").remove(),(this.settings.draggable||this.settings.title.showTitle)&&n._createDialogTitle.call(this),this.settings.close.showClose){var s=this.settings.close.closeInner,e=t('<div class="WEB_dialog_close">'+s+"</div>");e.off("click").on("click",function(){i.settings.close.auto&&clearTimeout(i.timer),n._closeDialog.call(i)}),s&&""!=s&&e.css("backgroundImage",""),e.prependTo(t(this))}if(this.settings.buttons.showButton){var o=t('<div class="WEB_dialog_footer"></div>');o.css({margin:0,padding:0}),t.each(this.settings.buttons.panel,function(s,e){if(e&&!t.isEmptyObject(e)){var a="";e.userClass&&(a=" "+e.userClass);var l=t('<div class="WEB_dialog_button'+a+'"><span class="dialog_button">'+e.btnText+"</span></div>");l.off("click").on("click",function(s){t.isFunction(e.btnFn)&&e.btnFn(s),clearTimeout(i.timer),t.isNumeric(e.close)?i.timer=setTimeout(function(){n._closeDialog.call(i)},e.close):e.close!==!1&&n._closeDialog.call(i)}),l.appendTo(o)}}),o.appendTo(this)}},_closeDialog:function(){t.isFunction(this.settings.beforeClose)&&this.settings.beforeClose(this.Event),this.e=t.Event("webDialog.beforeClose"),t(this).trigger(this.e),t(this).css({display:"none"}),t("#WEB_dialog_back").remove(),this.settings.lockScrollBar&&n._unLockScrollBar.call(this),t.isFunction(this.settings.afterClose)&&this.settings.afterClose(this.Event),this.e=t.Event("webDialog.afterClose"),t(this).trigger(this.e)},close:function(){return this.each(function(){n._closeDialog.call(this)})},_createModal:function(){var i=this;if(t("#WEB_dialog_back").remove(),this.settings.modal.showModal){t("#WEB_dialog_back").remove();var s=t('<div id="WEB_dialog_back"></div>');s.css({background:this.settings.modal.modalColor,opacity:this.settings.modal.modalOpacity,zIndex:this.settings.modal.modalClass}),this.settings.modal.modalClose&&s.off("click").on("click",function(){i.settings.close.auto&&clearTimeout(i.timer),n._closeDialog.call(i)}),s.appendTo(t("body"))}},_lockScrollBar:function(){t("html").css({overflow:"hidden"})},_unLockScrollBar:function(){t("html").css({overflow:"auto",height:"auto"})},_dragDialog:function(){if(this.settings.draggable){var e,o,n=t(this),a=this,l=t(this).find(".WEB_dialog_title"),r=n.outerHeight(),c=n.outerWidth(),h=t(i).height(),g=t(i).width(),d=h-r;MaxX=g-c,this.dragging=!1,l.mousedown(function(s){if(r=n.outerHeight(),c=n.outerWidth(),h=t(i).height(),g=t(i).width(),d=h-r,MaxX=g-c,a.settings.draggable){var f=n.offset().left,u=n.offset().top,p=t(i).scrollTop();return r<=h?u-=p:u=p,n.css({marginTop:0,marginLeft:0,left:f,top:u}),t.isFunction(a.settings.dragStart)&&a.settings.dragStart(a.Event),a.dragging=!0,e=s.clientY-t(this).parent().position().top,o=s.clientX-t(this).parent().position().left,l.setCapture&&l.setCapture(),!1}}),t(s).mousemove(function(i){if(a.settings.draggable&&a.dragging){t.isFunction(a.settings.dragIng)&&a.settings.dragIng(a.Event);var s=i.clientY-e,l=i.clientX-o;return s<=0?s=0:s>=d&&(s=d),l<0?l=0:l>=MaxX&&(l=MaxX),d<0&&(s=0),n.css({top:s,left:l}),!1}}),t(s).mouseup(function(i){a.settings.draggable&&(a.settings.dragEnd&&t.isFunction(a.settings.dragEnd)&&a.settings.dragEnd(a.Event),a.dragging=!1,l.releaseCapture&&l.releaseCapture(),i.cancelBubble=!0)})}},_createDialogTitle:function(){var i=this.settings.title.titleInner,s=t('<div class="WEB_dialog_title"><div class="title">'+i+"</div></div>");s.css({margin:0,padding:0}),s.prependTo(t(this))},_createScrollBar:function(){var s=t(i).height(),e=parseInt(t(this).css("borderTopWidth"))+parseInt(t(this).css("borderBottomWidth"));t(this).css({height:s-e});var o=s,a=parseInt(t(this).css("borderTopWidth")),l=t(this).find(".WEB_dialog_body"),r=t(this).find(".WEB_dialog_scroll");0==r.length&&l.wrap('<div class="WEB_dialog_scroll"></div>');var r=t(this).find(".WEB_dialog_scroll"),c=t(this).find(".WEB_dialog_title"),h=t(this).find(".WEB_dialog_footer");s-=2*a,s-=c.height()||0,s-=h.height()||0,o=s;var g=parseInt(r.css("borderTopWidth"))+parseInt(r.css("borderBottomWidth"))+parseInt(r.css("paddingTop"))+parseInt(r.css("paddingBottom"));r.css({height:o-g}),l.css({position:"relative",left:0,top:0}),t(this).find(".WEB_dialog_scroll_bar").remove();var d=parseInt(r.css("minHeight"));o<=d&&(o=d);var f=t('<div class="WEB_dialog_scroll_bar"><div class="WEB_dialog_scroll_slider"></div></div>');0==t(this).find(".WEB_dialog_scroll_bar").length&&r.append(f);var u=t(this).find(".WEB_dialog_scroll_bar"),p=u.height(),_=(o-p)/2;u.css({top:_}),n.createScroll.call(this)},createScroll:function(){var i,e=this,o=t(this).find(".WEB_dialog_scroll"),n=o.find(".WEB_dialog_body"),a=t(this).find(".WEB_dialog_scroll_slider"),l=a.parent().height()-a.height(),r=n.outerHeight()-o.height(),c=!1;a.mousedown(function(s){return c=!0,i=s.clientY-t(this).position().top,!1}),t(s).mousemove(function(t){if(c){var s=t.clientY-i;return s<0?s=0:s>l&&(s=l),a.css({top:s}),n.css({top:-s/l*r}),!1}}),t(s).mouseup(function(t){c=!1,t.cancelBubble=!0}),t(this).off("mousewheel").on("mousewheel",function(i){i.preventDefault();var s,o=i.deltaY,c=o*e.settings.scrollRate,h=t(this).find(".WEB_dialog_body").position().top;h+=c,o<0?Math.abs(h)>=r&&(h=-r):h>=0&&(h=0),n.css({top:h}),s=h/r,a.css({top:-l*s})})},_createDialogBody:function(){var i=t(this).children(),s=t(this).find(".WEB_dialog_body");0==s.length&&i.wrapAll('<div class="WEB_dialog_body"></div>');var e=t(this).find(".WEB_dialog_body").css({left:0,top:0}).clone(!0),o=t(this).find(".WEB_dialog_scroll");o.length>0&&(o.remove(),e.appendTo(t(this)))},_resizeDialog:function(){var s=this;t(i).off(".resetDialog").on("resize.resetDialog",function(){n._createScrollBar.call(s),n._dragDialog.call(s)})}};t.fn.WEB_dialog=function(){if(t.isBrowerSupportWebPlugin()){var i,s=arguments[0];if(n[s]&&"_"!=s.charAt(0))s=n[s],i=Array.prototype.slice.call(arguments,1);else{if("object"!=typeof s&&s)return t.error("方法未正确调用"),this;s=n.init,i=arguments}return s.apply(this,i)}}}(jQuery,window,document);