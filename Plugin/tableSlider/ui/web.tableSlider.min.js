!function(t,i,s,e){var n={modal:{showModal:!0,modalOpacity:.5,modalColor:"#000",modalClass:9,modalClose:!0},ESClose:!0,lockScrollbar:!1,title:{showTitle:!0,titleInner:"标题"},close:{showClose:!0,closeInner:"×",auto:!1,delay:2e3},buttons:{showButton:!0,panel:[]},draggable:!1,beforeOpen:function(){},afterOpen:function(){},afterClose:function(){},beforeClose:function(){},dragIng:function(){},dragStart:function(){},dragEnd:function(){}},o={init:function(i,s){return this.each(function(){var e=t(this).data("WEB_dialog_settings");this.Event=s||{},e?this.settings=t.extend(!0,{},e,i):this.settings=t.extend(!0,{},n,i),o._createDialog.call(this)})},position:function(){return this.each(function(){o._dialogCenter.call(this)})},_dialogCenter:function(){var n=parseInt(t(this).find(".WEB_dialog_title").css("minWidth")),a=t(i).width(),l=parseInt(t(this).css("borderLeftWidth"))||0,r=parseInt(t(this).css("paddingLeft"))||0,g=n;if(t(this).css({marginLeft:0,marginTop:0,width:n,height:"auto",left:"50%",top:"50%",position:"fixed"}),this.settings.width!=e&&t.isNumeric(Number(this.settings.width))&&Number(this.settings.width)>0)g=this.settings.width;else if("string"==typeof this.settings.width){var c=/^(1[0-9]?|[2-9]\d?)%$/gi;if(c.test(this.settings.width)){var h=this.settings.width.replace(c,"$1");h/=100,g=a*h,t.isNumeric(g)||(g=n)}}g>=a?g=a-2*l-2*r:g<n&&(g=n),t(this).css({width:g}),this.settings.height!=e&&this.settings.height>0&&t(this).css({height:this.settings.height});var d=t(this).outerWidth(),u=t(this).outerHeight();if(d>=a?t(this).css({marginLeft:0,left:0}):t(this).css({marginLeft:-d/2}),u>t(i).height()){var f=t(s).scrollTop();t(this).css({marginTop:0,top:f,position:"absolute"});var p=t(this).outerHeight();u<t(s).height()&&(p=t(s).height()),t("html").css({"overflow-y":"auto",height:p})}else t(this).css({marginTop:-u/2,top:"50%",position:"fixed"});t("html").css({"overflow-x":"hidden"}),this.settings.draggable&&o._dragDialog.call(this)},_createDialog:function(){var i=this;this.settings.beforeOpen&&t.isFunction(this.settings.beforeOpen)&&this.settings.beforeOpen(this.Event),t(this).css({display:"block"}),o._createButton.call(this),o._createModal.call(this),this.settings.lockScrollbar&&o._lockScrollbar.call(this),o._dialogCenter.call(this),this.settings.close.auto&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){o._closeDialog.call(i)},this.settings.close.delay)),this.settings.afterOpen&&t.isFunction(this.settings.afterOpen)&&this.settings.afterOpen(this.Event),o._resetModal.call(i),t(s).on("keydown",function(t){if(27==t.keyCode){if(!i.settings.ESClose)return;i.settings.close.auto&&i.timer&&clearTimeout(i.timer),o._closeDialog.call(i)}}),this.settings.draggable?t(this).find(".WEB_dialog_title").css({cursor:"move"}):t(this).find(".WEB_dialog_title").css({cursor:"auto"})},_createButton:function(){var i=this;if(t(this).find(".WEB_dialog_title,.WEB_dialog_close,.WEB_dialog_panel").remove(),this.settings.draggable?o._createDialogTitle.call(this):this.settings.title.showTitle&&o._createDialogTitle.call(this),this.settings.close.showClose){var s=this.settings.close.closeInner,n=t('<div class="WEB_dialog_close">'+s+"</div>");n.on("click",function(){i.settings.close.auto&&clearTimeout(i.timer),o._closeDialog.call(i)}),s&&""!=s&&n.css("backgroundImage",""),n.prependTo(t(this))}if(this.settings.buttons.showButton){var a=t('<div class="WEB_dialog_panel"></div>');a.css({marginRight:0,marginLeft:0,paddingRight:0,paddingLeft:0}),t.each(this.settings.buttons.panel,function(s,n){if(n.userClass!=e&&""!=n.userClass)var l=t('<div class="WEB_dialog_button '+n.userClass+'"><span class="dialog_button">'+n.btnText+"</span></div>");else var l=t('<div class="WEB_dialog_button"><span class="dialog_button">'+n.btnText+"</span></div>");l.on("click",function(s){n.btnFn&&t.isFunction(n.btnFn)&&n.btnFn(s),clearTimeout(i.timer),n.close||n.close==e?o._closeDialog.call(i):t.isNumeric(n.close)&&(i.timer=setTimeout(function(){o._closeDialog.call(i)},n.close))}),l.appendTo(a)}),a.appendTo(this)}},_closeDialog:function(){this.settings.beforeClose&&t.isFunction(this.settings.beforeClose)&&this.settings.beforeClose(this.Event),t(this).css({display:"none"}),t("#ui-modal").remove(),this.settings.lockScrollbar&&o._unLockScrollbar.call(this),this.settings.afterClose&&t.isFunction(this.settings.afterClose)&&this.settings.afterClose(this.Event)},close:function(){return this.each(function(){o._closeDialog.call(this)})},_createModal:function(){var e=this;if(this.settings.modal.showModal){t("#ui-modal").remove();var n=t('<div id="ui-modal"></div>');n.css({width:t(i).width(),height:t(s).height(),background:this.settings.modal.modalColor,position:"absolute",left:0,top:0,opacity:this.settings.modal.modalOpacity,zIndex:this.settings.modal.modalClass}),this.settings.modal.modalClose&&n.on("click",function(){e.settings.close.auto&&clearTimeout(e.timer),o._closeDialog.call(e)}),n.appendTo(t("body"))}},_resetModal:function(){var e=this;t(i).on("resize",function(){1==t("#ui-modal").length&&t("#ui-modal").css({width:t(i).width(),height:t(s).height()}),e.settings.draggable||o._dialogCenter.call(e)}).on("scroll",function(){1==t("#ui-modal").length&&t("#ui-modal").css({width:t(i).width(),height:t(s).height()})})},_lockScrollbar:function(){t("html").css({overflow:"hidden"})},_unLockScrollbar:function(){t("html").css({overflow:"auto",height:"auto"})},_dragDialog:function(){if(this.settings.draggable){var e=t(this),n=t(this).offset().top,o=t(this).offset().left,a=this,l=t(this).find(".WEB_dialog_title");t(this).css({marginTop:0,marginLeft:0,position:"absolute",top:n,left:o});var r=t(i).height()-t(this).outerHeight(!0),g=t(i).width()-t(this).outerWidth(!0);this.dragging=!1;var c,h;l.mousedown(function(i){if(a.settings.draggable)return a.settings.dragStart&&t.isFunction(a.settings.dragStart)&&a.settings.dragStart(a.Event),a.dragging=!0,c=i.clientY-t(this).parent().position().top,h=i.clientX-t(this).parent().position().left,l.setCapture&&l.setCapture(),!1}),t(s).mousemove(function(i){if(a.settings.draggable&&a.dragging){a.settings.dragIng&&t.isFunction(a.settings.dragIng)&&a.settings.dragIng(a.Event);var s=i.clientY-c,n=i.clientX-h;return s<0?s=0:s>=r&&(s=r),n<0?n=0:n>=g&&(n=g),r<0&&(s=0),e.css({top:s,left:n}),!1}}),t(s).mouseup(function(i){a.settings.draggable&&(a.settings.dragEnd&&t.isFunction(a.settings.dragEnd)&&a.settings.dragEnd(a.Event),a.dragging=!1,l.releaseCapture&&l.releaseCapture(),i.cancelBubble=!0)})}},_createDialogTitle:function(){var i=this.settings.title.titleInner||"请配置标题",s=t('<div class="WEB_dialog_title"><div class="title">'+i+"</div></div>");s.css({marginRight:0,marginLeft:0,paddingRight:0,paddingLeft:0}),s.prependTo(t(this))}};t.fn.WEB_dialog=function(){var i="Microsoft Internet Explorer"==navigator.appName&&navigator.appVersion.split(";")[1].replace(/[ ]/g,"");if("MSIE7.0"==i||"MSIE6.0"==i||"MSIE5.0"==i)return void alert("您的浏览器版本过低，本插件无法提供支持，请升级！");var s,e=arguments[0];if(o[e]&&"_"!=e.charAt(0))e=o[e],s=Array.prototype.slice.call(arguments,1);else{if("object"!=typeof e&&e)return t.error("方法未正确调用"),this;e=o.init,s=arguments}return e.apply(this,s)}}(jQuery,window,document);