<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<title>获取用户更新</title>
</head>

<body>
	<div class="container">
	
	</div>
	<script src="script/react.js"></script>
	<script src="script/react-dom.js"></script>
	<script src="script/browser.min.js"></script>
  <script src="script/jquery.min.js"></script>
	<script type="text/babel">
    var UpdateUserList=React.createClass({
          getInitialState:function(){
            return {
              userData:[]
            }
          },
          render:function(){
            return (
              <div className="panel panel-primary">
                <div className="panel-heading">更新用户信息</div>
                <div className="panel-body">
                  <button onClick={this.update} className="btn btn-primary">开始更新</button>
                  <div className="response">
                    <UserInfo data={this.state.userData}/>
                  </div>
                </div>
              </div>
            )
          },
          update:function(){
          var _this=this;
            this.request=$.ajax({
              url:this.props.source
            }).done(function(res){
              _this.setState({
                userData:res,
              })
            }).fail(function(){

            })
          },
          componentWillUnmount:function(){
            this.request.abort();
          }
    }),
    UserInfo=React.createClass({
      render:function(){
        return (<div>
            {
              this.props.data.map(function(D,i){
                return (<div key={i} className="form-group">{i}</div>)
              })
            }
        </div>)
      },
      componentWillUpdate:function(a){
         
      }
    })
    ReactDOM.render(<UpdateUserList source="https://api.github.com/users/octocat/gists"/>,
    document.querySelector(".container"))
	</script>
</body>
</html>